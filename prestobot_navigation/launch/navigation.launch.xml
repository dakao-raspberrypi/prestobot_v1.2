<launch>
     <let name="map_path" value="$(find-pkg-share prestobot_navigation)/maps/map.yaml" />
     <let name="navigation_config_path" value="$(find-pkg-share prestobot_navigation)/config/prestobot_navigation.yaml" />

     <include file="$(find-pkg-share nav2_bringup)/launch/bringup_launch.py">
          <arg name="map" value="$(var map_path)" />
          <arg name="params_file" value="$(var navigation_config_path)" />
          <arg name="use_sim_time" value="true" />
     </include>

     <!-- <node pkg="topic_tools" exec="relay" name="cmd_vel_relay" output="screen">
          <param name="input_topic" value="/cmd_vel" />
          <param name="output_topic" value="/diff_drive_controller/cmd_vel" />
     </node> -->

     <!-- topic tool relay does not work with arm64 Raspberry Ubuntu
     so I made my own topic relay node in prestobot_py_pkg
     to relay /cmd_vel to /diff_drive_controller/cmd_vel
     because nav2 stack publishes to /cmd_vel
     and diff_drive_controller subscribes to /diff_drive_controller/cmd_vel -->
     <node pkg="prestobot_py_pkg" exec="topic_relay">
          <param name="input_topic" value="/cmd_vel" />
          <param name="output_topic" value="/diff_drive_controller/cmd_vel" />
          <param name="message_type" value="geometry_msgs/msg/TwistStamped" />
     </node>

     <node pkg="prestobot_py_pkg" exec="set_initial_pose" />
</launch>